#pragma once

#include <SFML\Graphics.hpp>
#include "TextureHolder.h"
#include "Grid.h"

class Engine
{
private:
	TextureHolder m_TextureHolder;

	// A regular RenderWindow
	sf::RenderWindow m_Window;
	sf::View m_MainView;
	sf::View m_GameOverView;
	sf::View m_WinView;

	sf::Texture m_gameOverTexture;
	sf::Texture m_winTexture;
	
	sf::Sprite m_gameOverSprite;
	sf::Sprite m_winSprite;

	//Player m_player;

	// The grid (will hold everything else)
	Grid m_Grid;

	//Each of the levels in boulderdash
	//0 is dirt, 1 is Boulder, 2 is Diamond, 3 is Exit and finally 4 is player
	int m_levelOne[15][15] = { { 0,0,0,1,0,0,0,0,0,0,0,0,0,0,0 },{ 1,0,1,0,0,0,0,0,0,0,0,0,0,0,0 },{ 0,2,0,0,0,0,0,0,0,0,0,0,0,0,0 },
							  { 0,2,0,0,0,0,2,0,0,0,0,0,1,0,2 },{ 0,0,0,0,0,0,0,0,0,0,0,0,0,0,0 },{ 0,0,0,0,0,0,0,0,0,0,0,0,0,0,0 },{ 0,0,0,0,0,0,1,0,0,0,0,0,0,0,0 },
							  { 0,0,1,0,0,2,0,0,1,0,0,1,0,0,0 },{ 0,0,0,0,0,0,0,0,3,0,0,0,0,0,0 },{ 0,0,0,0,0,0,0,0,0,0,0,0,0,0,0 },{ 0,0,0,0,0,0,0,0,0,0,0,0,0,0,0 },
							  { 0,0,0,0,0,0,0,0,0,0,0,0,0,0,3 },{ 0,0,0,0,0,0,0,0,0,0,0,0,0,0,0 },{ 0,0,0,0,0,0,0,0,0,0,0,0,0,0,0 },{ 0,0,0,0,0,0,0,0,0,0,0,0,0,0,0 } };

	int m_levelTwo[15][15] = { { 0,0,0,2,0,2,0,0,0,0,0,0,0,0,0 },{ 1,0,1,0,0,0,0,0,0,0,0,0,0,0,0 },{ 0,2,0,0,0,0,0,0,0,0,0,0,0,0,0 },
								{ 0,0,0,0,0,0,0,0,0,0,0,0,0,0,0 },{ 0,0,0,0,0,0,0,0,0,0,0,0,0,0,0 },{ 0,0,0,0,2,0,0,0,0,0,0,0,0,0,0 },{ 0,0,0,0,0,0,1,0,0,0,0,0,0,0,0 },
								{ 0,0,0,0,0,0,0,0,0,0,0,0,0,0,0 },{ 0,0,0,0,0,0,0,0,3,0,0,0,0,0,0 },{ 0,0,0,0,0,0,0,0,0,0,0,0,0,0,0 },{ 0,0,0,0,0,0,0,0,0,0,0,0,0,0,0 },
								{ 0,0,0,0,0,0,0,0,0,0,0,0,0,0,0 },{ 0,0,1,0,0,0,0,0,0,0,0,0,0,0,0 },{ 0,0,0,2,0,0,0,0,0,0,0,0,0,0,0 },{ 0,0,0,0,4,0,0,0,0,0,0,0,0,0,0 } };

	int m_levelThree[15][15] = { { 0,0,0,2,0,2,0,0,0,0,0,0,0,0,0 },{ 1,0,1,0,0,0,0,0,0,0,0,0,0,0,0 },{ 0,2,0,0,0,0,0,0,0,0,0,0,0,0,0 },
								{ 0,0,0,0,0,0,0,0,0,0,0,0,0,0,0 },{ 0,0,0,1,0,0,0,0,0,0,0,0,0,0,0 },{ 0,0,0,0,2,0,0,0,1,0,0,0,0,0,0 },{ 0,0,0,0,0,0,1,0,0,0,2,0,0,0,0 },
								{ 0,0,0,0,0,0,0,0,0,0,0,0,0,0,0 },{ 0,2,0,0,0,0,0,0,3,0,0,0,0,0,0 },{ 0,0,0,0,0,0,0,0,0,0,1,0,0,0,0 },{ 0,4,0,0,0,0,0,0,0,0,0,0,0,0,0 },
								{ 0,0,0,0,0,0,0,0,0,0,0,0,0,0,0 },{ 0,0,1,0,0,0,0,0,0,0,0,0,0,0,0 },{ 0,0,0,2,0,0,0,0,0,0,0,0,0,0,0 },{ 0,0,0,0,0,0,0,0,0,1,0,0,0,0,0 } };

	int m_levelFour[15][15] = { { 0,0,0,2,0,2,0,0,0,0,0,0,0,0,0 },{ 1,0,1,0,0,0,3,0,0,0,0,0,0,0,0 },{ 0,2,0,0,0,0,0,0,0,0,0,0,0,0,0 },
								{ 0,0,0,0,1,0,0,0,0,0,0,0,0,0,0 },{ 0,0,0,0,0,0,0,0,0,0,0,0,0,0,0 },{ 0,0,0,0,2,0,0,0,0,0,4,0,0,0,0 },{ 0,0,0,1,0,0,1,0,0,0,0,0,0,0,0 },
								{ 0,0,0,0,0,0,0,0,2,0,0,0,0,0,0 },{ 0,0,0,0,0,0,0,0,2,0,0,0,0,0,0 },{ 0,0,0,0,0,0,0,0,0,0,0,0,0,0,0 },{ 0,0,0,0,0,0,0,0,0,0,0,0,0,0,0 },
								{ 0,0,0,0,1,0,0,0,0,0,0,0,0,0,0 },{ 0,0,1,0,0,0,0,0,0,0,0,0,0,0,0 },{ 0,0,0,2,0,0,0,0,0,0,0,0,0,0,0 },{ 0,1,0,0,2,0,0,0,0,0,0,0,0,0,0 } };

	int m_levelFive[15][15] = { { 0,0,0,2,0,2,0,0,0,0,0,0,0,0,0 },{ 1,0,1,0,0,0,0,0,0,0,0,0,0,0,0 },{ 0,2,0,0,0,0,0,2,0,0,0,0,0,0,0 },
								{ 0,0,0,0,0,0,0,0,0,0,0,0,0,0,0 },{ 0,0,0,0,0,0,0,0,0,0,0,0,0,0,0 },{ 0,0,0,0,2,0,0,0,0,0,0,1,0,0,0 },{ 0,0,0,0,0,0,1,0,0,0,0,0,0,0,0 },
								{ 0,0,0,0,0,0,3,0,0,0,0,0,0,0,0 },{ 0,0,0,0,0,0,0,0,0,0,0,0,0,0,0 },{ 0,0,0,0,0,0,0,1,1,0,0,0,0,0,0 },{ 0,0,0,0,0,0,0,0,0,0,0,0,0,0,0 },
								{ 0,0,0,0,0,0,0,0,0,0,0,0,0,0,0 },{ 0,0,1,0,0,0,0,4,0,0,0,0,0,0,0 },{ 0,0,0,2,0,0,0,0,0,0,0,0,0,0,0 },{ 0,0,0,0,1,0,0,0,2,0,0,0,0,0,0 } };

	void LoadLevel(int currentLevel);
	void SpawnLevel(int levelToLoad[15][15]);
	bool IsGameover = false;
	bool HasWon = false;

	int m_currentLevel = 1;

	// Private functions
private:
	void input();
	void update(float dtAsSeconds);
	void draw();

public:
	// The Engine
	Engine();

	// Run will call all the private functions
	void run();
};